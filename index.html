<!DOCTYPE html>
<html lang="mn">
<head>
<meta charset="UTF-8">
<title>–ê–ó–•–£–†</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

<style>
:root{
  --bg1:#05080f;
  --bg2:#0b1c2d;
  --accent:#00ffd5;
  --danger:#ff4d6d;
  --text:#e8f1ff;
}

*{margin:0;padding:0;box-sizing:border-box;font-family:system-ui,-apple-system,BlinkMacSystemFont;}
body{
  background: radial-gradient(circle at top,var(--bg2),var(--bg1));
  color:var(--text);
  overflow:hidden;
  touch-action:manipulation;
}

/* UI */
#score{
  position:fixed;
  top:14px;
  left:50%;
  transform:translateX(-50%);
  font-size:22px;
  opacity:.85;
}

/* Screens */
.screen{
  position:fixed;
  inset:0;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  background:linear-gradient(180deg,rgba(0,0,0,.3),rgba(0,0,0,.85));
}
.hidden{display:none;}

h1{
  font-size:46px;
  letter-spacing:6px;
  color:var(--accent);
  text-shadow:0 0 25px rgba(0,255,213,.7);
}
.tag{
  margin-top:8px;
  opacity:.7;
}

button{
  margin-top:26px;
  padding:14px 34px;
  border:none;
  border-radius:30px;
  font-size:16px;
  font-weight:600;
  background:var(--accent);
  color:#002;
  cursor:pointer;
  box-shadow:0 0 25px rgba(0,255,213,.6);
}
button:active{transform:scale(.95)}

.skin{
  margin-top:20px;
  font-size:14px;
  opacity:.8;
}

/* Canvas */
canvas{display:block}
</style>
</head>

<body>

<div id="score">0</div>

<!-- START -->
<div id="start" class="screen">
  <h1>–ê–ó–•–£–†</h1>
  <div class="tag">–ù—ç–≥ —Ç–æ–≤—à–∏–ª—Ç. –ù—ç–≥ –±–æ–ª–æ–º–∂</div>
  <button onclick="startGame()">–≠–•–õ–≠–•</button>
  <div class="skin">üé® Skin: <span id="skinName">–ù–µ–æ–Ω</span></div>
</div>

<!-- GAME OVER -->
<div id="over" class="screen hidden">
  <h1>–¢”®–ì–°”®–í</h1>
  <p id="finalScore"></p>
  <p id="bestScore"></p>
  <button onclick="restart()">–î–ê–•–ò–ù</button>
</div>

<canvas id="game"></canvas>

<script>
const canvas=document.getElementById("game");
const ctx=canvas.getContext("2d");
resize();
addEventListener("resize",resize);

function resize(){
  canvas.width=innerWidth;
  canvas.height=innerHeight;
}

/* === DATA === */
const skins=[
  {name:"–ù–µ–æ–Ω",color:"#00ffd5"},
  {name:"–£–ª–∞–∞–Ω",color:"#ff4d6d"},
  {name:"–ê–ª—Ç",color:"#ffd700"},
  {name:"–¶—ç–Ω—Ö—ç—Ä",color:"#4dabff"}
];

let skinIndex=Number(localStorage.getItem("azkhur_skin"))||0;
document.getElementById("skinName").textContent=skins[skinIndex].name;

/* === GAME STATE === */
let player,obstacles,particles,speed,score,alive,spawnTimer;

/* === INIT === */
function init(){
  player={
    x:canvas.width/2,
    y:canvas.height-120,
    r:16,
    dir:1
  };
  obstacles=[];
  particles=[];
  speed=3;
  score=0;
  alive=true;
}

/* === START === */
function startGame(){
  document.getElementById("start").classList.add("hidden");
  init();
  spawnTimer=setInterval(spawnObstacle,650);
  update();
}

/* === INPUT === */
addEventListener("pointerdown",()=>{
  if(!alive)return;
  player.dir*=-1;
  spawnParticles(player.x,player.y);
});

/* === OBSTACLES === */
function spawnObstacle(){
  obstacles.push({
    x:Math.random()*canvas.width,
    y:-30,
    r:14
  });
}

/* === PARTICLES === */
function spawnParticles(x,y){
  for(let i=0;i<12;i++){
    particles.push({
      x,y,
      vx:(Math.random()-.5)*6,
      vy:(Math.random()-.5)*6,
      life:30
    });
  }
}

/* === UPDATE === */
function update(){
  if(!alive)return;
  ctx.clearRect(0,0,canvas.width,canvas.height);

  /* PLAYER */
  player.x+=player.dir*4.5;
  if(player.x<player.r||player.x>canvas.width-player.r)player.dir*=-1;

  ctx.beginPath();
  ctx.arc(player.x,player.y,player.r,0,Math.PI*2);
  ctx.fillStyle=skins[skinIndex].color;
  ctx.shadowBlur=20;
  ctx.shadowColor=skins[skinIndex].color;
  ctx.fill();
  ctx.shadowBlur=0;

  /* OBSTACLES */
  for(let o of obstacles){
    o.y+=speed;
    ctx.beginPath();
    ctx.arc(o.x,o.y,o.r,0,Math.PI*2);
    ctx.fillStyle="#ff4d6d";
    ctx.fill();

    let dx=o.x-player.x,dy=o.y-player.y;
    if(Math.sqrt(dx*dx+dy*dy)<o.r+player.r){
      endGame();
    }
  }
  obstacles=obstacles.filter(o=>o.y<canvas.height+40);

  /* PARTICLES */
  for(let p of particles){
    p.x+=p.vx;
    p.y+=p.vy;
    p.life--;
    ctx.fillStyle="rgba(0,255,213,.7)";
    ctx.fillRect(p.x,p.y,3,3);
  }
  particles=particles.filter(p=>p.life>0);

  score++;
  speed+=0.0006;
  document.getElementById("score").textContent=score;

  requestAnimationFrame(update);
}

/* === END === */
function endGame(){
  alive=false;
  clearInterval(spawnTimer);

  let best=Number(localStorage.getItem("azkhur_best"))||0;
  if(score>best){
    best=score;
    localStorage.setItem("azkhur_best",best);
    unlockSkin(best);
  }

  document.getElementById("finalScore").textContent="–û–Ω–æ–æ: "+score;
  document.getElementById("bestScore").textContent="–®–∏–ª–¥—ç–≥: "+best;
  document.getElementById("over").classList.remove("hidden");
}

/* === RESTART === */
function restart(){
  document.getElementById("over").classList.add("hidden");
  startGame();
}

/* === SKIN UNLOCK === */
function unlockSkin(best){
  if(best>800)skinIndex=3;
  else if(best>500)skinIndex=2;
  else if(best>200)skinIndex=1;

  localStorage.setItem("azkhur_skin",skinIndex);
  document.getElementById("skinName").textContent=skins[skinIndex].name;
}
</script>

</body>
</html>
