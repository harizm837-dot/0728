<!DOCTYPE html>
<html lang="mn">
<head>
<meta charset="UTF-8">
<title>АЗХУР</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

<style>
:root{
  --text:#eaffff;
}

*{margin:0;padding:0;box-sizing:border-box;font-family:system-ui;}
body{
  background: radial-gradient(circle at top,#2b1055,#000);
  overflow:hidden;
  color:var(--text);
  touch-action:manipulation;
}

#score{
  position:fixed;
  top:14px;
  left:50%;
  transform:translateX(-50%);
  font-size:22px;
  opacity:.9;
}

.screen{
  position:fixed;
  inset:0;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  background:linear-gradient(180deg,rgba(0,0,0,.2),rgba(0,0,0,.85));
}
.hidden{display:none;}

h1{
  font-size:48px;
  letter-spacing:6px;
  background:linear-gradient(90deg,#00ffd5,#ffd700,#ff4d6d);
  -webkit-background-clip:text;
  color:transparent;
  text-shadow:0 0 30px rgba(255,255,255,.3);
}
.tag{opacity:.8;margin-top:8px}

button{
  margin-top:26px;
  padding:14px 36px;
  border:none;
  border-radius:30px;
  font-size:16px;
  font-weight:600;
  background:linear-gradient(90deg,#00ffd5,#ffd700);
  color:#002;
  cursor:pointer;
  box-shadow:0 0 30px rgba(0,255,213,.6);
}
button:active{transform:scale(.95)}

canvas{display:block}
</style>
</head>

<body>

<div id="score">0</div>

<div id="start" class="screen">
  <h1>АЗХУР</h1>
  <div class="tag">Нэг товшилт. Нэг боломж</div>
  <button onclick="startGame()">ЭХЛЭХ</button>
</div>

<div id="over" class="screen hidden">
  <h1>ТӨГСӨВ</h1>
  <p id="final"></p>
  <p id="best"></p>
  <button onclick="restart()">ДАХИН</button>
</div>

<canvas id="game"></canvas>

<script>
const canvas=document.getElementById("game");
const ctx=canvas.getContext("2d");
resize();addEventListener("resize",resize);
function resize(){canvas.width=innerWidth;canvas.height=innerHeight;}

const colors=["#00ffd5","#ffd700","#ff4d6d","#4dabff","#c77dff"];

let player,obs,parts,score,speed,alive,timer;

function init(){
  player={x:canvas.width/2,y:canvas.height-120,r:16,dir:1,color:0};
  obs=[];parts=[];score=0;speed=3;alive=true;
}

function startGame(){
  document.getElementById("start").classList.add("hidden");
  init();
  timer=setInterval(spawn,600);
  loop();
}

addEventListener("pointerdown",()=>{
  if(!alive)return;
  player.dir*=-1;
  player.color=(player.color+1)%colors.length;
  burst(player.x,player.y);
});

function spawn(){
  obs.push({
    x:Math.random()*canvas.width,
    y:-30,
    r:14,
    c:colors[Math.floor(Math.random()*colors.length)]
  });
}

function burst(x,y){
  for(let i=0;i<16;i++){
    parts.push({
      x,y,
      vx:(Math.random()-.5)*6,
      vy:(Math.random()-.5)*6,
      life:30,
      c:colors[Math.floor(Math.random()*colors.length)]
    });
  }
}

function loop(){
  if(!alive)return;
  ctx.clearRect(0,0,canvas.width,canvas.height);

  player.x+=player.dir*4.5;
  if(player.x<player.r||player.x>canvas.width-player.r)player.dir*=-1;

  ctx.beginPath();
  ctx.arc(player.x,player.y,player.r,0,Math.PI*2);
  ctx.fillStyle=colors[player.color];
  ctx.shadowBlur=25;
  ctx.shadowColor=colors[player.color];
  ctx.fill();
  ctx.shadowBlur=0;

  for(let o of obs){
    o.y+=speed;
    ctx.beginPath();
    ctx.arc(o.x,o.y,o.r,0,Math.PI*2);
    ctx.fillStyle=o.c;
    ctx.fill();
    if(Math.hypot(o.x-player.x,o.y-player.y)<o.r+player.r)end();
  }
  obs=obs.filter(o=>o.y<canvas.height+40);

  for(let p of parts){
    p.x+=p.vx;p.y+=p.vy;p.life--;
    ctx.fillStyle=p.c;
    ctx.fillRect(p.x,p.y,3,3);
  }
  parts=parts.filter(p=>p.life>0);

  score++;speed+=0.0007;
  document.getElementById("score").textContent=score;
  requestAnimationFrame(loop);
}

function end(){
  alive=false;clearInterval(timer);
  let best=Number(localStorage.getItem("az_best"))||0;
  if(score>best){best=score;localStorage.setItem("az_best",best);}
  document.getElementById("final").textContent="Оноо: "+score;
  document.getElementById("best").textContent="Шилдэг: "+best;
  document.getElementById("over").classList.remove("hidden");
}

function restart(){
  document.getElementById("over").classList.add("hidden");
  startGame();
}
</script>

</body>
</html>
